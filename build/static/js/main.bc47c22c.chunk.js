(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(1),o=n(16),a=n.n(o),c=n(3),u=n(5),i=n.n(u),l="/api/persons",d=function(){return i.a.get(l).then((function(e){return e.data}))},b=function(e){return i.a.post(l,e).then((function(e){return e.data}))},j=function(e,t){return i.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},m=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},f=function(e){return Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={name:e.newName,number:e.newNumber},s={},r=!1;e.persons.forEach((function(t){t.name===e.newName&&(r=!0,s=t)})),r?window.confirm("".concat(e.newName," is already added to phonebook, replace the old number with a new one?"))&&(j(s.id,n).then((function(t){e.setPersons(e.persons.map((function(e){return e.name!==n.name?e:t})))})).catch((function(t){e.setMessage("Error: Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){e.setMessage(null)}),5e3),console.log(t),e.setPersons(e.persons.filter((function(e){return e.id!==s.id})))})),e.setMessage("Updated ".concat(n.name)),setTimeout((function(){e.setMessage(null)}),5e3)):b(n).then((function(t){e.setPersons(e.persons.concat(t)),e.setMessage("Added ".concat(n.name)),setTimeout((function(){e.setMessage(null)}),5e3)})).catch((function(t){e.setMessage("Error: ".concat(t.response.data.error)),setTimeout((function(){e.setMessage(null)}),5e3)})),e.setNewName(""),e.setNewNumber("")},children:[Object(s.jsxs)("div",{children:["name:",Object(s.jsx)("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})]}),Object(s.jsxs)("div",{children:["number:",Object(s.jsx)("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},h=n(17),p=function(e){var t=e.person,n=e.persons,r=e.setPersons,o=e.setMessage;return Object(s.jsxs)("p",{className:"person",children:[t.name," ",t.number," ",Object(s.jsx)("button",{onClick:function(){if(window.confirm("Delete ".concat(t.name," ?"))){var e=Object(h.a)(n);e.splice(n.indexOf(t),1),m(t.id),r(e),o("Deleted ".concat(t.name)),setTimeout((function(){o(null)}),5e3)}return Object(s.jsx)(s.Fragment,{})},children:"delete"})]})},g=function(e){var t=e.personsToShow,n=e.persons,r=e.setPersons,o=e.setMessage;return Object(s.jsx)(s.Fragment,{children:t.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(p,{person:e,persons:n,setPersons:r,setMessage:o},e.name)},e.name)}))})},O=function(e){var t=e.message;return null===t?null:"Error:"===t.split(" ")[0]?Object(s.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t}):Object(s.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},w=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(""),u=Object(c.a)(a,2),i=u[0],l=u[1],b=Object(r.useState)(""),j=Object(c.a)(b,2),m=j[0],h=j[1],p=Object(r.useState)(""),w=Object(c.a)(p,2),x=w[0],v=w[1],N=Object(r.useState)(!0),M=Object(c.a)(N,2),S=M[0],y=M[1],P=Object(r.useState)(null),k=Object(c.a)(P,2),T=k[0],C=k[1];Object(r.useEffect)((function(){d().then((function(e){o(e)}))}),[]);var E=S?n:n.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())}));return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{message:T}),"filter shown with",Object(s.jsx)("input",{value:x,onChange:function(e){v(e.target.value),""===e.target.value?y(!0):y(!1)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(f,{persons:n,setPersons:o,newName:i,setNewName:l,newNumber:m,setNewNumber:h,setMessage:C}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(g,{personsToShow:E,persons:n,setPersons:o,setMessage:C})]})};a.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.bc47c22c.chunk.js.map