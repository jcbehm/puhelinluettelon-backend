(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var s=t(0),r=t(1),o=t(16),a=t.n(o),c=t(3),u=t(5),i=t.n(u),l="/api/persons",d=function(){return i.a.get(l).then((function(e){return e.data}))},b=function(e){return i.a.post(l,e).then((function(e){return e.data}))},j=function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},f=function(e){return Object(s.jsxs)("form",{onSubmit:function(n){n.preventDefault();var t={name:e.newName,number:e.newNumber},s={},r=!1;e.persons.forEach((function(n){n.name===e.newName&&(r=!0,s=n)})),r?window.confirm("".concat(e.newName," is already added to phonebook, replace the old number with a new one?"))&&(j(s.id,t).then((function(n){e.setPersons(e.persons.map((function(e){return e.name!==t.name?e:n})))})).catch((function(n){e.setMessage("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){e.setMessage(null)}),5e3),console.log(n),e.setPersons(e.persons.filter((function(e){return e.id!==s.id})))})),e.setMessage("Updated ".concat(t.name)),setTimeout((function(){e.setMessage(null)}),5e3)):(b(t).then((function(n){e.setPersons(e.persons.concat(n))})),e.setMessage("Added ".concat(t.name)),setTimeout((function(){e.setMessage(null)}),5e3)),e.setNewName(""),e.setNewNumber("")},children:[Object(s.jsxs)("div",{children:["name:",Object(s.jsx)("input",{value:e.newName,onChange:function(n){e.setNewName(n.target.value)}})]}),Object(s.jsxs)("div",{children:["number:",Object(s.jsx)("input",{value:e.newNumber,onChange:function(n){e.setNewNumber(n.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},h=t(17),p=function(e){var n=e.person,t=e.persons,r=e.setPersons,o=e.setMessage;return Object(s.jsxs)("p",{className:"person",children:[n.name," ",n.number," ",Object(s.jsx)("button",{onClick:function(){if(window.confirm("Delete ".concat(n.name," ?"))){var e=Object(h.a)(t);e.splice(t.indexOf(n),1),m(n.id),r(e),o("Deleted ".concat(n.name)),setTimeout((function(){o(null)}),5e3)}return Object(s.jsx)(s.Fragment,{})},children:"delete"})]})},O=function(e){var n=e.personsToShow,t=e.persons,r=e.setPersons,o=e.setMessage;return Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(p,{person:e,persons:t,setPersons:r,setMessage:o},e.name)},e.name)}))})},g=function(e){var n=e.message;return null===n?null:"Information"===n.split(" ")[0]?Object(s.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):Object(s.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},w=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),u=Object(c.a)(a,2),i=u[0],l=u[1],b=Object(r.useState)(""),j=Object(c.a)(b,2),m=j[0],h=j[1],p=Object(r.useState)(""),w=Object(c.a)(p,2),x=w[0],v=w[1],N=Object(r.useState)(!0),S=Object(c.a)(N,2),M=S[0],y=S[1],P=Object(r.useState)(null),k=Object(c.a)(P,2),C=k[0],T=k[1];Object(r.useEffect)((function(){d().then((function(e){o(e)}))}),[]);var B=M?t:t.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())}));return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(g,{message:C}),"filter shown with",Object(s.jsx)("input",{value:x,onChange:function(e){v(e.target.value),""===e.target.value?y(!0):y(!1)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(f,{persons:t,setPersons:o,newName:i,setNewName:l,newNumber:m,setNewNumber:h,setMessage:T}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(O,{personsToShow:B,persons:t,setPersons:o,setMessage:T})]})};a.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2f4f92a4.chunk.js.map